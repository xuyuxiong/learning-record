# 计算机网络
[](https://juejin.cn/post/6844904100035821575)
[](https://juejin.cn/post/6844904070889603085)
## HTTP常见状态码
- 1xx：接受，继续处理
- 101: 在HTTP升级为webSocket的时候，如果服务器同意变更，就会发送状态码101
- 103: 客户端应在服务端返回HTML前开始预加载资源
- 200: 成功，并返回数据
- 201: 已创建
- 202: 已接受
- 203: 成功，但未授权
- 204: 成功，无内容
- 205: 成功 重置内容
- 206: 成功 部分内容，用来实现断点续传
- 301: 永久重定向。场景是使用域名跳转，新的URL在响应中给出
- 302: 临时重定向。场景是未登录的用户跳转登录
- 303: 临时重定向，强制浏览器将请求方法从POST改到GET
- 304: 资源未修改，可使用缓存
- 305: 需代理访问
- 400: 请求语法错误
- 401: 要求身份认证
- 403: 拒绝请求
- 404: 资源不存在
- 405: 请求方法不允许
- 500: 服务器错误
- 502: 网关错误：服务器作为网关或代理出现错误
- 503: 服务不可用：服务器目前无法使用
- 504: 网关超时：网关或代理服务器，未及时获取请求
## 从输入URL到呈现页面过程
> 这个流程可以分为两部分来说，第一份部分是浏览器请求响应的过程
[](https://zhuanlan.zhihu.com/p/357964691)
## http 1.0 2.0 3.0的区别
- 1.0
无连接、无状态、队头阻塞
- 1.1 
长连接、新增五种请求方法、并发连接(并发6个长连接)
- 2.0
采用二进制格式的报头和数据体，减少传输数据量，提高传输效率
头部压缩，客户端和服务端同时维护一张哈希表，所有字段存入表中生成索引，只发送索引号
多路复用：真正的并行传输，能够在TCP上进行任意数量的HTTP请求
服务端推送
- 3.0
使用基于UDP的QUIC协议
无队头阻塞、多路复用
连接建立
更好的移动端表现：因为TCP是基于IP识别连接，而QUIC是通过ID识别链接
加密认证的报文：TCP协议头没有经过任何加密和认证，QUIC的所有报文头部都是经过认证的，报文Body都是经过加密的
向前纠错机制：每个数据包除了它本身的内容之外还包括了其他数据包的数据，因此少量的丢包可以通过其他包的冗余数据直接组装而无需重传。
## 强缓存和协商缓存

## GET和POST的请求的区别
- 从缓存的角度：GET请求会被浏览器主动缓存下来，留下历史记录，而POST不会
- 从编码的角度：GET只能进行URL编码，只能接收ASCII字符，而POST没有限制
- 从参数的角度：GET一般放在URL中，而POST放在请求体中
- 从幂等性的角度，GET是幂等的，而POST不是。(幂等表示执行相同的操作，结果也是相同的)
- 从TCP的角度，GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发 header 部分，如果服务器响应 100(continue)， 然后发 body 部分。(火狐浏览器除外，它的 POST 请求只发一个 TCP 包)
## POST和PUT请求的区别
PUT请求是向服务器端发送数据的，从而改变信息，该请求就像数据库的update操作一样，用来修改数据的内容，但是不会增加数据的种类等，也就是说无论进行多少次PUT操作，其结果并没有不同。
POST请求同PUT请求类似，都是向服务器端发送数据的，但是该请求会改变数据的种类等资源，就像数据库的insert操作一样，会创建新的内容。几乎目前所有的提交操作都是用POST请求的。
## OPTIONS请求方法及使用场景
主要用途有两个：
获取服务器支持的所有HTTP请求方法
用来检查访问权限。例如在进程CORS跨域资源共享时，对于复杂请求，就是使用OPTIONS方法发送嗅探请求，以判断是否有对指定资源的访问权限
## HTTP协议的性能怎么样
HTTP协议基于TCP/IP，并且使用了请求-应答的通信模式，所以性能的关键就在这两点里
长连接：避免每次建立TCP连接三次握手所花费的时间
管道网络传输：指在同一个TCP连接里面客户端可以发起多个请求，但是返回还是按顺序返回
队头阻塞：一旦队首的请求处理太慢就会阻塞后面请求的处理；解决方案：并发连接、域名分片
## URL有哪些组成部分

## 什么是HTTPS协议
- HTTPS是一种应用层协议，是一种通过计算机网络进行安全通信的传输协议
- HTTPS经由HTTP进行通信，在HTTP的基础上引入一个加密层，使用SSL/TLS来加密数据包
- 主要目的是提供对网站服务器的身份验证，保护交换数据的隐私与完整性
- 默认工作在TCP协议的443端口
## 讲讲HTTPS加密
对称加密： 需要有一个客户端生成的对称密钥，用于对传输的数据进行加密，但需要将该对称密钥告知给服务器
非对称加密： 服务器提供一个公钥（自己持有私钥），将公钥传发送给客户端，客户端使用公钥对对称密钥进行加密，将密文传送给服务器
引入证书机制： 通过第三方公证机构，向网站颁发证书，该证书里面就含有公钥。客户端向服务器请求的也就是证书，客户端拿到证书后去公证机构校验，如果证书合法，就使用里面的公钥对对称密钥进行加密

## TLS/SSL的工作原理

## 数字证书是什么
由CA机构颁发的证明（也就是问题中提及的CA证书），它包含了公钥、公钥拥有者名称、CA 的数字签名、有效期、授权中心名称、证书序列号等信息
## HTTPS通信过程
https 通信是建立在 ssl 连接层之上的请求和响应，客户端将加密组件发送到服务端，服务端进行匹配后将数字证书等信息发送到客户端，客户端进行证书验证，验证通过后使用非对称加密对数据的密钥进行协商，协商后得到对称的加密密钥，然后使用对称算法进行 TCP 链接，然后与客户端进行三次握手后，进行数据传输，传输完成后，四次挥手，断开链接，通信结束
## HTTPS是如何保证安全的

## DNS协议是什么
域名解析系统
作用；将域名解析为IP地址，客户端向DNS服务器发送域名查询请求，DNS服务器告知客户机web服务器的IP地址
工作原理：在浏览器输入域名后，DNS会根据以下的优先级查看有没有对应的IP，直到查到为止
1. 浏览器的缓存
2. 本机host文件
3. DNS服务器的缓存
4. 根服务器->二级域名->三级域名
## OSI七层协议、TCP/IP五层协议

## TCP/UDP的概念及特点
TCP是一个面向连接的、可靠的、基于字节流的传输层协议
UDP是一个面向无连接的传输层协议
## TCP/UDP的区别

## TCP/UDP的使用场景
TCP应用场景：效率要求相对低，但对准确性要求相对高的场景。因为传输中需要对数据确认、重发、排序。如文件传输、接收邮件、远程登录
UDP应用场景：效率要求相对高，准确性低的场景。如QQ聊天、在线视频、网络语音
## UDP协议为什么不可靠
UDP在传输数据之前不需要建立连接，远程主机的传输层在接收到UDP报文后不需要确认，总结就以下四点：
不保证消息交付：不确认、不重传、无超时
不保证交付顺序：不设置序列号、不重排、不发生队首阻塞
不跟踪连接状态：不必建立连接或重启状态机
不进行拥塞控制：不内置客户端或网络反馈机制
## TCP的重传机制

## TCP的拥塞控制机制

## TCP的流量控制机制

## TCP的可靠传输机制

## TCP的三次握手和四次挥手

## TCP粘包是怎么回事，如何处理

## websocket的连接原理

## HTTP和HTTPS的区别

## 多路复用是什么
在 HTTP/1 中，每次请求都会建立一次 HTTP 连接，也就是我们常说的 3 次握手和 4 次挥手，这个过程在一次请求过程中占用了相当长的时间，即使开启了 Keep-Alive，解决了多次连接的问题，但是依然有两个效率上的问题，一是串行的文件传输，二是连接数过多导致的性能问题。

HTTP/2 的多路复用就是为了解决上述的两个性能问题。

在 HTTP/2 中，有两个非常重要的概念，分别是帧（frame）和流（stream）。帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。

多路复用，就是在一个 TCP 连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。
## quic 基于 udp 怎么保证可靠性

## 怎么做 DNS 预解析

## HTTP中提升传输速率的方式有哪些？常用的内容编码方式有哪些

## 传输图片的过程中如果突然中断，如何在传输恢复后从之前的中断中恢复传输

## 什么是代理？什么是网关？代理和网关的作用是什么

## 什么是对称密钥加密？什么是非对称密钥加密？哪个更安全

## ajax和axios、fetch的区别

## JSONP
```js
const jsonp = ({url, params, callbackName}) => {
  const generateURL = () => {
    let dataStr = ''
    for(let key in params) {
      dataStr += `${key}=${params[key]}&`
    }
    dataStr +=`callback=${callbackName}`
    return `${url}?${dataStr}`
  }
  return new Promise((resolve, reject) => {
    callbackName = callbackName || Math.random().toString.replace(',', '')
    let scriptEle = document.createElement('script')
    scriptEle.src = generateURL()
    document.body.appendChild(scriptEle)
    window[callbackName] = data => {
      resolve(data)
      document.body.removeChild(scriptEle)
    }
  })
}
```
## HTTP报文结构是怎样的
对于TCP而言，在传输的时候分为两个部分：TCP头和数据部分
而HTTP类似，也是header+body的结构
## 如何理解HTTP的请求方法
http/1.1规定了一下请求方法
- GET
- HEAD
- POST
- PUT
- DELETE
- CONNECT
- OPTIONS
- TRACE
## GET和POST有什么区别
- 从缓存的角度
- 从编码的角度
- 从参数的角度
- 从TCP的角度
## 如何理解URI
URI全称为统一资源标识符，包含了URN和URL两个部分
URI只能使用ASCII
## 简要概括一下HTTP的特点？HTTP有哪些缺点
1. 灵活可拓展：语义上的自由，传输形式的多样性
2. 可靠传输：基于TCP/IP
3. 请求-应答：一发一收、有来有回
4. 无状态：每次请求都是独立无关的
缺点：无状态、明文传输、队头阻塞
## 对Accept字段了解多少
text： text/html, text/plain, text/css 等
image: image/gif, image/jpeg, image/png 等
audio/video: audio/mpeg, video/mp4 等
application: application/json, application/javascript, application/pdf, application/octet-stream
## 对于定长和不定长的数据，HTTP是怎么传输的
定长：Content-Length
不定长：Transfer-Encoding: chunked
## HTTP如何处理大文件的传输
HTTP采取了范围请求的解决方案
如何支持：服务器要加上这样一个响应头Accept-Ranges: none 来告知客户端这边是支持范围请求的
请求单段数据和请求多段数据响应头不一样
```ini
// 单段数据
Range: bytes=0-9
// 多段数据
Range: bytes=0-9, 30-39
```
## HTTP中如何处理表单数据的提交
两种主要的表单提交方式，体现在两种不同的Content-Type取值
- application/x-www-form-urlencoded
- multipart/form-data
## HTTP1.1如何解决hTTP的队头阻塞问题
HTTP传输是基于请求-应答的模式进行，里面的任务被放在一个任务队列中串行执行，一旦队首的请求太慢就会阻塞后面的请求
- 并发连接
同一域名分配多个长连接，在RFC2616规定过客户端最多并发 2 个连接，不过事实上在现在的浏览器标准中，这个上限要多很多，Chrome 中是 6 个
- 域名分片
## Cookie了解多少
Cookie本质上是浏览器里面存储的一个很小的文本文件，内部以键值对的方式来存储。
有效期可以通过Expires和Max-Age两个属性来设置
安全相关：如果带上Secure说明只能通过HTTPS传输cookie；如果cookie字段带上HttpOnly，那么说明只能通过HTTP协议传输，不能通过JS访问，这是预防XSS攻击的重要手段
缺点：1.容量缺点，上限只有4KB；2.性能缺陷：请求都会带上完整的Cookie，这样随着请求数量的增多，会造成巨大的性能浪费；3.安全缺陷：Cookie以纯文本的形式传输容易被非法用户截获然后进行一系列的篡改
## 如何理解HTTP代理
代理服务器相当于一个中间人的角色
功能：
1. 负载均衡：通过特定的算法分发给不同的源服务器
2. 保障安全：利用心跳机制监控后台的服务器，发现故障机器将其踢出集群
3. 缓存代理：将内容缓存到代理服务器，使得客户端可以直接从代理服务器获得资源
## 什么是WebSocket
WebSocket是一种在单个TCP连接上进行全双工通信的协议
特点：
1. 建立在TCP协议之上，服务端的实现比较容易
2. 与HTTP协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用HTTP协议，因此握手时不容易屏蔽，能通过各种HTTP代理服务器
3. 数据格式比较轻量，性能开销小，通信高效
4. 可以发送文本，也可以发送二进制数据
5. 没有同源限制，客户端可以与任意服务端通信
6. 协议标识符是ws，服务器网址就是URL
## 为什么需要WebSocket
已经有了HTTP协议，为什么还需要另一个协议
因为hTTP协议有一个缺陷，通信只能由客户端发起，不具备服务器推送能力
## WebSocket与HTTP的区别
相同点：都是基于TCP的，都是可靠性传输协议
联系：WebSocket在建立握手时，数据都是通过HTTP传输的，但是建立之后，真正传输的时候是不需要HTTP协议的
不同点：
1. WebSocket是双向通行协议，可以双向发送活接收信息，而HTTP是单向的
2. WebSocket 是需要浏览器和服务器握手进行建立连接的，而 http 是浏览器发起向服务器的连接
3. 虽然 HTTP/2 也具备服务器推送功能，但 HTTP/2 只能推送静态资源，无法推送指定的信息
## WebSocket的优缺点：
优点：
WebScoket协议一旦建立之后，互相沟通所消耗的请求头是很小的
服务器可以向客户端推送消息
缺点：
少部分浏览器不支持
websocket断线重连：
心跳就是客户端定时的给服务端发送消息，证明客户端是在线的
## 如何判断在线离线
当客户端第一次发送请求到服务端时会携带唯一标识以及时间戳，之后的请求服务端会根据当前时间减去上次时间得到毫秒数，小于指定时间就是在线，否则就是离线
## 如何解决断线问题
一种是修改nginx配置信息，第二种是websocket发送心跳包